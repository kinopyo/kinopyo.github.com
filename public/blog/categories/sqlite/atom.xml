<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: sqlite | Yet Another Kinopyo Blog]]></title>
  <link href="http://kinopyo.github.com/blog/categories/sqlite/atom.xml" rel="self"/>
  <link href="http://kinopyo.github.com/"/>
  <updated>2012-08-26T12:20:36+09:00</updated>
  <id>http://kinopyo.github.com/</id>
  <author>
    <name><![CDATA[Qihuan Piao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[MySQL autocommitでトランザクションを制御する]]></title>
    <link href="http://kinopyo.github.com/blog/mysql-using-autocommit-to-control-transaction"/>
    <updated>2010-12-07T00:00:00+09:00</updated>
    <id>http://kinopyo.github.com/blog/mysql-using-autocommit-to-control-transaction</id>
    <content type="html"><![CDATA[<p>autocommitの値を持ちましてMySQLでのトランザクションを制御できます。</p>

<p>```sql</p>

<pre><code>-暗黙(自動)コミットを無効に
</code></pre>

<p>SET AUTOCOMMIT = 0;</p>

<pre><code>-トランザクション開始
</code></pre>

<p>BEGIN;</p>

<pre><code>-SQL文をながす
</code></pre>

<p>UPDATE...
INSERT...
...</p>

<pre><code>-コミット
</code></pre>

<p>COMMIT;</p>

<pre><code>-あるいはロールバック
</code></pre>

<p>ROLLBACK;</p>

<pre><code>-暗黙(自動)コミットを有効に
</code></pre>

<p>SET AUTOCOMMIT = 1;</p>

<pre><code>-暗黙(自動)コミットのステータスを確認
</code></pre>

<p>SELECT @@AUTOCOMMIT;</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linuxにsqlite3-ruby gemをインストール]]></title>
    <link href="http://kinopyo.github.com/blog/install-sqlite3-ruby-gem-in-linux"/>
    <updated>2010-10-15T00:00:00+09:00</updated>
    <id>http://kinopyo.github.com/blog/install-sqlite3-ruby-gem-in-linux</id>
    <content type="html"><![CDATA[<h2>経緯</h2>

<p>何も考えずにGemfileにsqlite3を定義してbundleを流したらこんなエラーが出ました。
{% codeblock %}
$ gem install sqlite3-ruby
Building native extensions.  This could take a while...
ERROR:  Error installing sqlite3-ruby:</p>

<pre><code>    ERROR: Failed to build gem native extension.
</code></pre>

<p>/home/user/.rvm/rubies/ruby-head/bin/ruby extconf.rb
checking for sqlite3.h... no
sqlite3.h is missing. Try 'port install sqlite3 +universal' or 'yum install sqlite3-devel'</p>

<h3>extconf.rb failed</h3>

<p>Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.</p>

<p>Provided configuration options:</p>

<pre><code>    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/home/user/.rvm/rubies/ruby-head/bin/ruby
    --with-sqlite3-dir
    --without-sqlite3-dir
    --with-sqlite3-include
    --without-sqlite3-include=${sqlite3-dir}/include
    --with-sqlite3-lib
    --without-sqlite3-lib=${sqlite3-dir}/lib
</code></pre>

<p>Gem files will remain installed in /home/user/.rvm/gems/ruby-head/gems/sqlite3-ruby-1.3.0 for inspection.
Results logged to /home/user/.rvm/gems/ruby-head/gems/sqlite3-ruby-1.3.0/ext/sqlite3/gem_make.out
{% endcodeblock %}</p>

<p>キーのメッセージは「sqlite3.h is missing. Try 'port install sqlite3 +universal' or 'yum install sqlite3-devel'」なのでそのとおりコマンドを流しましたが、portはそのコマンドがないと、yumはsqlite3-develを見つからないと返事したんです。。。</p>

<p>なのでsqlite本家でソースをダウンロードしビルドしてインストールする必要があります。</p>

<h2>sqlite3のインストール</h2>

<p><a href="http://www.sqlite.org/download.html">http://www.sqlite.org/download.html</a>からsqlite-amalgamation-x.x.x.tar.gz(この記事を書いてる時点では3.7.3)のTarballバージョンのファイルをダウンロードします。上から二番目のリンクです。</p>

<p>{% codeblock %}
$ wget http://www.sqlite.org/sqlite-amalgamation-3.7.3.tar.gz
$ tar vxzf sqlite-amalgamation-3.7.3.tar.gz
$ cd sqlite-amalgamation-3.7.3
$ ./configure --prefix=/usr/local
$ make
$ sudo make install
{% endcodeblock %}</p>

<h2>sqlite-ruby gemのインストール</h2>

<p>後は普通にgem installでもいいしbundle installでもOKです。
{% codeblock %}
$ gem install sqlite3-ruby
{% endcodeblock %}</p>
]]></content>
  </entry>
  
</feed>
