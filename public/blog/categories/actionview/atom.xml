<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ActionView | Yet Another Kinopyo Blog]]></title>
  <link href="http://kinopyo.github.com/blog/categories/actionview/atom.xml" rel="self"/>
  <link href="http://kinopyo.github.com/"/>
  <updated>2012-08-26T12:20:36+09:00</updated>
  <id>http://kinopyo.github.com/</id>
  <author>
    <name><![CDATA[Qihuan Piao]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Rails オプション(省略可)local variablesをpartial viewに渡す方法]]></title>
    <link href="http://kinopyo.github.com/blog/rails-passing-optional-local-variables-to-partial-view"/>
    <updated>2011-11-07T00:00:00+09:00</updated>
    <id>http://kinopyo.github.com/blog/rails-passing-optional-local-variables-to-partial-view</id>
    <content type="html"><![CDATA[<p>例えば省略可能なフラグみたいなローカル変数をpartial viewに渡した時、そのデフォルト動作をpartial viewでハンドリングしたいですね。
{% gist 1344066 use_case_sample.erb %}</p>

<p>調べてみたら<em>defined?</em>と<em>local_assigns.has_key?</em>が見つかりましたが、前者のほうはオススメできなさそうです。
{% blockquote http://api.rubyonrails.org/classes/ActionView/Base.html %}
Testing using defined? headline will not work. This is an implementation restriction.
{% endblockquote %}</p>

<p>{% gist 1344066 solution.erb %}
実際やってみて、defined?でも動けるパターンはありますが、if/unless文で一行にしたらバグりました。なのでやはり<em> local_assigns.has_key?</em>を使いましょう。</p>

<p>{% gist 1344066 compared_to_defined_method_with_oneline_condition.erb %}</p>

<h2>Resources</h2>

<p><a href="http://stackoverflow.com/questions/238615/defined-method-in-ruby-and-rails">http://stackoverflow.com/questions/238615/defined-method-in-ruby-and-rails</a>
<a href="http://api.rubyonrails.org/classes/ActionView/Base.html">http://api.rubyonrails.org/classes/ActionView/Base.html</a></p>
]]></content>
  </entry>
  
</feed>
