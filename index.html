
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Kinopyo Blog</title>
	<meta name="author" content="Qihuan Piao">

	
	<meta name="description" content="&#8220;Have you ever found yourself stretched too thin? Have you ever felt both overworked and underutilized? Have you ever found yourself majoring &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="http://feeds.feedburner.com/kinopyo" rel="alternate" title="Kinopyo Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">Kinopyo Blog</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://about.me/kinopyo">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://about.me/kinopyo">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:kinopyo.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/fantasyday" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/kinopyo" title="GitHub">GitHub</a>
		
		
		
		
		
		<a class="rss" href="http://feeds.feedburner.com/kinopyo" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:kinopyo.com">
	</form>
</nav>

</header>
  
    <header id='about_me' class="inner">
      <div class="photo">
        <img src="http://cdn.kinopyo.com/images/profile.jpg" alt="Photo - Qihuan Piao">
      </div>
      <h3>Hi I'm Qihuan Piao, I'm a Rails developer and I like to make stuff.</h3>
      <p>
        Here I share articles and tips about web development, inpirations and thoughts I get from books and daily life.
      </p>
      <p>I believe that English is a <strong>MUST</strong> skill for me to become a great engineer, so I’m trying to to write posts in it these days.</p>
    </header>

  

	<div id="content" class="inner">


    <article class="post">
	<h1 class="title"><a href="/blog/book-essentialism-the-disciplined-pursuit-of-less/">Book “Essentialism - The Disciplined Pursuit of Less”</a></h1>
	<div class="entry-content">
		<p>&#8220;Have you ever found yourself stretched too thin? Have you ever felt both overworked and underutilized? Have you ever found yourself majoring in minor activities? Do you ever feel busy but not productive?&#8221;</p>

<p>This book is about answers to these questions. The <strong>key messages and takeaways for me are</strong>:</p>

<ul>
<li>Life is a tradeoff. You can’t have it all, therefore you have to choose, choose what matters the most. Less, but better.</li>
<li>You have to give yourself permission to say No to others, so you can say Yes to your goal and make highest contribution.</li>
<li>It’s not about getting more things done, it’s about getting the right things done. Effective over productive. I love this so much.</li>
</ul>


<h2>If You Don’t Have Time to Read it…</h2>

<p>Here is a great video reviewing this book, and actually I started reading it because of this video. To be honest I think it might be arguably <em>better</em> than the book itself. If you don’t have enough time, just check out the video, should take you less than 25 minutes.</p>

<div class="video-container">
<iframe width="560" height="315" src="//www.youtube.com/embed/k-mciueg_K0" frameborder="0" allowfullscreen></iframe>
</div>


<h2>Chapters I Would Like to Read Twice</h2>

<p>Part I: Essence: What is the core mind-set of an Essentialist?</p>

<ul>
<li>CHOOSE: The Invincible Power of Choice</li>
<li>DISCERN: The Unimportance of Practically Everything</li>
<li>TRADE-OFF: Which Problems Do I want?</li>
</ul>


<p>Part II: Explore: How can we discern the trivial many from the vital few?</p>

<ul>
<li>SLEEP: Protect the Asset</li>
<li>SELECT: The Power of Extreme Criteria</li>
</ul>


<p>Part III: Eliminate: How can we cut out the trial many?</p>

<ul>
<li>DARE: The Power of a Graceful “No”</li>
</ul>


<p>Part IV: Execute: How can we make doing the vital few things almost effortless?</p>

<ul>
<li>PROGRESS: The Power of Small Wins</li>
</ul>


<h2>Overview</h2>

<p>The first part, the &#8220;What&#8221; part, is really great. All the problems introduced there are so real, I could map literary everything to my real life. Very inspirational.</p>

<p>But sadly the following chapters, the &#8220;how&#8221; part, are less compelling to me. I agree with the general idea, it’s just the examples and evidences are not convincing enough.</p>

<p>Overall it’s a good book, I’d rate it 4 out of 5. It does give me positive energies and courages to improve my life, makes me pause to think about the past, which choices were made by “default”(others) and which were made by “design”(me), makes me think twice before purchase any non-essential items, makes me observe my bad habits &amp; routines and fix them, makes me pursue less but better.</p>

<p>p.s. I didn&#8217;t title this post as &#8220;Book Review&#8221;, as I realized the word &#8220;review&#8221; is too big for me, makes me want to cover every aspect of the book, pros and corns, scan every note and highlight I made during the reading, that is overwhelming and will simplify stops me from writing. “Done is better than perfect”, indeed, the essential thing for me is to write this post and share my findings!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-11-18T20:53:00+09:00" pubdate data-updated="true">2014-11-18</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/book/'>Book</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/use-activejob-in-rails-4-1/">Use ActiveJob in Rails 4.1</a></h1>
	<div class="entry-content">
		<p>ActiveJob is <a href="http://weblog.rubyonrails.org/2014/8/20/Rails-4-2-beta1/">the headline feature in Rails 4.2</a>, the <a href="http://edgeguides.rubyonrails.org/active_job_basics.html">Active Job Basics on RailsGuides</a> explains the philosophy and usage very well, make sure you’ve checked that first. However there’re some gotchas if you want to use it right now in your Rails 4.1 app. Here I’m gonna show you how to install it in 4.1, and things you need to take extra care of.</p>

<h2>Install ActiveJob in Rails 4.1</h2>

<p>Add <code>activejob</code> to your <code>Gemfile</code> then <code>bundle install</code>.</p>

<p>Create a <code>active_job.rb</code> file under <code>config/initializers</code> and paste code below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;active_job&#39;</span>
</span><span class='line'><span class="c1"># or any other supported backend such as :sidekiq or :delayed_job</span>
</span><span class='line'><span class="ss">ActiveJob</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">queue_adapter</span> <span class="o">=</span> <span class="ss">:inline</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you should be abel to load ActiveJob in your rails app without error.</p>

<p>Note that the one you installed is not <a href="https://github.com/rails/rails/tree/master/activejob">the one inside the rails repository</a>, that has a version of <a href="https://rubygems.org/gems/activejob/versions/4.2.0.beta2">4.2.0.beta2</a> same as Rails at the time of writing, the one you installed is <a href="https://rubygems.org/gems/activejob/versions/0">version 0</a>. You can find the archived source code from its <a href="https://github.com/rails/activejob">original repository</a>.</p>

<h2>Creating a Job</h2>

<p>To create a job, you have to manually create the <code>app/jobs</code> folder first, then follow the same naming convention to create your job class file like <code>app/jobs/guests_cleanup_job.rb</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">class</span> <span class="nc">GuestsCleanupJob</span> <span class="o">&lt;</span> <span class="ss">ActiveJob</span><span class="p">:</span><span class="ss">:Base</span>
</span><span class='line'><span class="err">  </span><span class="n">queue_as</span> <span class="ss">:default</span>
</span><span class='line'>
</span><span class='line'><span class="err">  </span><span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
</span><span class='line'><span class="err">    </span><span class="c1"># Do something later</span>
</span><span class='line'><span class="err">  </span><span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Enqueuing the Job</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="no">GuestsCleanupJob</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
</span><span class='line'><span class="no">GuestsCleanupJob</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Differences between latest ActiveJob</h2>

<ul>
<li>no rails generator for jobs.</li>
<li>no callback mechanism like <code>before_enqueue</code>, <code>before_perform</code> etc.</li>
<li>doesn’t load itself to rails app by default, that’s why you need a initializer to load it manually.</li>
<li>enqueue syntax is slightly different, in Rails 4.2.beta2 <code>enqueue</code> has changed to <code>perform_later</code>.</li>
<li>internally it’s using <a href="https://github.com/rails/activemodel-globalid">activemodel-globalid</a> instead of <a href="https://github.com/rails/globalid">GlobalID</a>(GlobalID is renamed from activemodel-globalid).</li>
<li>setting backend syntax is slightly different</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1"># Rails 4.2.beta2</span>
</span><span class='line'><span class="no">Rails</span><span class="o">.</span><span class="n">application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">active_job</span><span class="o">.</span><span class="n">queue_adapter</span> <span class="o">=</span> <span class="ss">:delayed_job</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Rails 4.1</span>
</span><span class='line'><span class="ss">ActiveJob</span><span class="p">:</span><span class="ss">:Base</span><span class="o">.</span><span class="n">queue_adapter</span> <span class="o">=</span> <span class="ss">:delayed_job</span>
</span></code></pre></td></tr></table></div></figure>


<p>p.s. I haven’t checked ActionMailer. I’m currently using it with DelayedJob and so far so good.</p>

<h2>Summary</h2>

<p>ActiveJob is very convenient, it provides a unified interface for the job infrastructure that allows you to switch the backend easily.</p>

<p>But as you can see there’re <strong>big diffs between the latest  developed version and the one now we’re able to install in Rails 4.1.</strong></p>

<p>Is it worth it to make the effort to try it now, and push these small upcoming changes when you upgrade to Rails 4.2 to your mental stack? My suggestion is <strong>if you’re just right about to implement a queue system and willing to adapt to it, then it’s OK</strong>, otherwise maybe better just leave the current app running as is and wait for a more mature timing.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-10-22T18:16:00+09:00" pubdate data-updated="true">2014-10-22</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/rails/'>Rails</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/rubykaigi-2014-3-good-talks-for-rails-developers/">RubyKaigi 2014 - 3 Good Talks for Rails Developers</a></h1>
	<div class="entry-content">
		<p>I went to <a href="http://rubykaigi.org/2014">Rubykaigi 2014</a> last week, there were lots of great talks about ruby itself, rails tips and more. Here I’ll share 3 things I feel worth to share for rails developers.</p>

<h2>Synvert</h2>

<p><a href="http://rubykaigi.org/2014/presentation/S-RichardHuang">Speaker page on Rubykaigi2014</a></p>

<blockquote><p>Synvert = syntax + convert, makes it easy to convert ruby code automatically</p></blockquote>

<p>Synvert is a gem made by the same author of <a href="https://github.com/flyerhzm/bullet">bullet</a> gem. Using it you can convert your rails 3 <code>before_filter</code> to rails 4 syntax <code>before_action</code>, rspec <code>should have</code> to <code>expect(…).to have</code> or ruby 1.8 hash to 1.9 hash syntax with just one command, and it does support more. It’s well tested so no worry for human error.</p>

<p>You could define your own rules to convert code, or use those built-in very common used snippets for rails, rspec and factory_girl.</p>

<h3>Installation and usage</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">gem</span> <span class="n">install</span> <span class="n">synvert</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># fetch snippets to ~/.synvert directory</span>
</span><span class='line'><span class="n">synvert</span> <span class="o">--</span><span class="n">sync</span>
</span><span class='line'>
</span><span class='line'><span class="n">synvert</span> <span class="o">-</span><span class="n">r</span> <span class="n">factory_girl</span><span class="o">/</span><span class="n">use_short_syntax</span>
</span></code></pre></td></tr></table></div></figure>


<p>Run <code>git diff</code> I got</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">- user = FactoryGirl.create(:user)</span>
</span><span class='line'><span class="gi">+ user = create(:user)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>How does it work</h3>

<p>AST(Abstract Syntax Tree) is used internally, it parses your source code to meaningful structures. It’s like grammar in English, one phrase can be broken down to words and some are noun, some are verb, it’s like saying “let’s replace all the verb ‘walk’ to ‘run’”.  I highly recommend you to check out the slide if you want to learn more.</p>

<p><img src="http://cdn.kinopyo.com/images/attributes_for_ast_node.png" alt="Example of attributes for AST node" /></p>

<p>For instance, it breaks a method call to receiver, message and arguments. A typical method call is a type of “send node”, class definition is “class node” and there is “block node”.</p>

<p>Links</p>

<ul>
<li><a href="https://speakerdeck.com/flyerhzm/write-ruby-code-to-change-ruby-code">Write ruby code to change ruby code </a></li>
<li><a href="https://github.com/xinminlabs/synvert">synvert gem</a></li>
<li><a href="http://synvert-tools.herokuapp.com">synvert playground</a></li>
</ul>


<h2>Going the distance</h2>

<p><a href="http://rubykaigi.org/2014/presentation/S-RichardSchneeman">Speaker page on Rubykaigi2014</a></p>

<p>To be honest I’m not sure I fully understand the algorithm of calculating distance between 2 words, but the great part is <a href="https://twitter.com/schneems">@ schneems</a> used it to improve rails generator command to suggest possible commands when you had a typo.</p>

<p>Please see the pull request for details. <a href="https://github.com/rails/rails/pull/15497">Emit suggested generator names when not found #15497</a></p>

<p>If you ever make a cli command, you could follow the same pattern, using the algorithm to suggest candidates instead of just showing plain error message.</p>

<p>Good to see how how he adapted scientific algorithm to solve real world problem.</p>

<h2>Speeding up Rails 4.2</h2>

<p><a href="http://rubykaigi.org/2014/presentation/S-AaronPatterson">Speaker page on Rubykaigi2014</a></p>

<p>Interesting to see how <a href="https://twitter.com/tenderlove">@tenderlove</a> find room for optimization and how to measure it.</p>

<p>Tools mentioned:</p>

<ul>
<li><a href="https://github.com/evanphx/benchmark-ips">benchmark-ips</a>, benchmarks a blocks iterations/second. For short snippits of code, ips automatically figures out how many times to run the code to get interesting data. No more guessing at random iteration counts!</li>
<li><a href="https://github.com/ko1/allocation_tracer">allocation_tracer</a>, allows to trace object allocation.</li>
</ul>


<p><a href="https://speakerdeck.com/tenderlove/gao-du-nakodo">Slide on speakerdeck</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-09-23T18:21:00+09:00" pubdate data-updated="true">2014-09-23</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/event/'>Event</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/recover-your-local-octopress-repository/">Recover Your Local Octopress Repository</a></h1>
	<div class="entry-content">
		<p>Here I&#8217;ll show you how to recover or restore your local octopress
repository, for instance you&#8217;re on a new machine, or just lost your
local copy of it.</p>

<p>It requries you to have a repository on github that you&#8217;ve deployed your
octopress posts.</p>

<p>First I recommend that you read this post: <a href="http://blog.zerosharp.com/clone-your-octopress-to-blog-from-two-places/">Clone Your Octopress to Blog From Two Places</a>, the <strong>Recreating a local Octopress repository</strong> section.</p>

<p>And here is what worked for me, please replace <code>kinopyo</code> with your user
name.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone -b source git@github.com:kinopyo/kinopyo.github.com.git octopress
</span><span class='line'>cd octopress
</span><span class='line'>
</span><span class='line'>gem install bundler
</span><span class='line'>bundle install
</span><span class='line'>
</span><span class='line'>rake preview
</span><span class='line'>open http://localhost:4000</span></code></pre></td></tr></table></div></figure>


<h2>Tips on Converting HTML to Markdown</h2>

<p>Somehow the latest 3 posts are still missing after I git cloned my
remote repository. I checked in advance and saved those copies as html.
And after I restored my octopress repository I used <a href="http://johnmacfarlane.net/pandoc/">Pandoc</a> to convert those html to markdown.</p>

<p>It works like:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pandoc -f html -t markdown your_html_file.html</span></code></pre></td></tr></table></div></figure>


<h2>Thoughts on Disaster</h2>

<p>p.s. I stored my blog octopress repository on Dropbox and somehow it
just all gone, it really shocked me. Probably it was my fault not
theirs, but still I always thought Dropbox is a safe place, but I don&#8217;t
even have a clue why it happended and somehow could&#8217;t see the history and
restore from their website. After I noticed it everytime I came up with
something to write I&#8217;ve had used it as an excuse, or maybe I was not in
the mood to deal with it(also I didn&#8217;t know how&#8230;).</p>

<p>So I need a fallback solution about Dropbox, every disaster changes you to rethink
about current seems comfortable situation. And hope I&#8217;ll write more often :)</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-03-01T01:52:00+09:00" pubdate data-updated="true">2014-03-01</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/octopress/'>Octopress</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/remote-work-day-one-trust/">Remote Work, Day One: Trust</a></h1>
	<div class="entry-content">
		<p><img src="http://cdn.kinopyo.com/images/Trust-is-everything-front-cover.jpg" alt="" /></p>

<p>Lots of big changes happened in my life recently, one of them is my
workplace. Lucky enough, now I got a chance to embrace the <em>modern</em>
style of work, that is working remotely.</p>

<p>I suppose you know more or less about remote. 37signals has published
their new book, <a href="http://37signals.com/remote/">REMOTE: Office Not
Required</a>, where all the benefits you can
get from remote is described. I’m half way done of that book, and
probably will write another post once I finished it and compared it to
my real experience. So here I’m gonna talk about only one thing, a key
thing, <strong>trust</strong>.</p>

<p>I’m a true believer of remote work. As in the book says,</p>

<blockquote><p>The bottom line is that you shouldn’t hire people you don’t trust, or
work for bosses who don’t trust you. If you’re not trusted to work
remotely, why are you trusted to do anything at all?</p></blockquote>

<p>I totally agree with that. But in reality is, well at least the
environment around me is even every single manager or boss is good and
kind, we still fall into the traditional working style, 9:00 - 18:00+ in
the office, that’s the norm, so dominant, I didn’t even try to convince
anyone to change that.</p>

<p>Fortunately I got a very unique opportunity to do remote work. After the
first day, I should say the biggest and most important “get” is not
about the productivity, freedom or flexibility, although they’re truly
there, <strong>it’s about the trust I’ve never experienced at work.</strong></p>

<p>“I trust you. So no matter what, when and where you do the work, I don’t
care, as long as we’re moving forward.” That was pretty much the key
conversation I had. It was a really warm feeling. I don’t know how to
explain it in words exactly, to be honest I did see that remote work
coming before I joined. But when it really happened, I was flattered!
I’ve never got this kind of tremendous trust, it means a lot to me as a
person. I’m sure I’m not gonna waste it.</p>

<p><strong>Trust is the first step to remote work. It’s personal and
fundamental.</strong> If you trust your teammate, with proper tools and
communications I really think remote work will work!</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-11-11T00:00:00+09:00" pubdate data-updated="true">2013-11-11</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/work/'>Work</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/install-capybara-webkit-on-mavericks/">Install capybara-webkit on Mavericks</a></h1>
	<div class="entry-content">
		<p>I got a brand new Mac Air recently, when I tried to install
capybara-webkit I encountered some problems.</p>

<h2>The Error</h2>

<p>Got this error when bundle install one rails app.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Installing capybara-webkit (0.12.1)
</span><span class='line'>Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
</span><span class='line'>
</span><span class='line'>    /Users/qihuan-piao/.rvm/rubies/ruby-2.0.0-p247/bin/ruby extconf.rb
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Gem files will remain installed in /Users/qihuan-piao/.rvm/gems/ruby-2.0.0-p247/gems/capybara-webkit-0.12.1 for inspection.
</span><span class='line'>Results logged to /Users/qihuan-piao/.rvm/gems/ruby-2.0.0-p247/gems/capybara-webkit-0.12.1/./gem_make.out
</span><span class='line'>
</span><span class='line'>An error occurred while installing capybara-webkit (0.12.1), and Bundler cannot continue.
</span><span class='line'>Make sure that `gem install capybara-webkit -v '0.12.1'` succeeds before bundling.
</span></code></pre></td></tr></table></div></figure>


<p>Tried <code>brew install qt</code> didn’t get luck, raised this error:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>brew install qt4 --build-from-source
</span><span class='line'>==&gt; Downloading http://download.qt-project.org/official_releases/qt/4.8/4.8.5/qt-everywhere-opensource-src-4.8.5.tar.gz
</span><span class='line'>Already downloaded: /Library/Caches/Homebrew/qt-4.8.5.tar.gz
</span><span class='line'>==&gt; ./configure -prefix /usr/local/Cellar/qt/4.8.5 -system-zlib -confirm-license -opensource -nomake demos -nomake examples -cocoa -fast -release -no-3dnow -L/opt/X11/lib -I/opt/X11/include -pl
</span><span class='line'>==&gt; make
</span><span class='line'>                                   ^
</span><span class='line'>7 errors generated.
</span><span class='line'>make[2]: *** [.obj/release-shared/qdrawhelper_ssse3.o] Error 1
</span><span class='line'>make[1]: *** [release] Error 2
</span><span class='line'>make: *** [sub-gui-make_default-ordered] Error 2
</span><span class='line'>
</span><span class='line'>READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting
</span><span class='line'>
</span><span class='line'>These open issues may also help:
</span><span class='line'>    https://github.com/mxcl/homebrew/pull/22283
</span><span class='line'>    https://github.com/mxcl/homebrew/issues/23480</span></code></pre></td></tr></table></div></figure>


<h2>Solution</h2>

<p>Checked all those links and tried several things, eventually downloading
qt installer from the qt-project website solved my problem.</p>

<p><a href="http://qt-project.org/downloads"><img src="http://cdn.kinopyo.com/images/download_qt4.8_for_mac-3.png" alt="" /></a>
<a href="http://qt-project.org/downloads">Download link</a></p>

<p>Just install the debug libraries, qt libraries then bundle install
again.</p>

<h2>Note</h2>

<p>If you already got qt installed and capybara-webkit worked before
upgrade to Mavericks, then it’s probably gonna work as well.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-29T12:00:00+09:00" pubdate data-updated="true">2013-10-29</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/capybara/'>Capybara</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/install-ruby-1-dot-9-3-on-mavericks/">Install Ruby 1.9.3 on Mavericks</a></h1>
	<div class="entry-content">
		<h2>Problem</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rvm install 1.9.3
</span><span class='line'>
</span><span class='line'>Searching for binary rubies, this might take some time.
</span><span class='line'>Found remote file https://rvm.io/binaries/osx/10.9/x86_64/ruby-1.9.3-p448.tar.bz2
</span><span class='line'>Checking requirements for osx.
</span><span class='line'>Installing requirements for osx.
</span><span class='line'>Updating system - using Zsh, can not show progress, be patient...
</span><span class='line'>Error running 'requirements_osx_brew_update_system ruby-1.9.3-p448',
</span><span class='line'>please read /Users/qihuan-piao/.rvm/log/1383014621_ruby-1.9.3-p448/update_system.log
</span><span class='line'>Requirements installation failed with status: 1.</span></code></pre></td></tr></table></div></figure>


<h2>Solution</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gcc -v
</span><span class='line'>
</span><span class='line'>Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1
</span><span class='line'>Apple LLVM version 5.0 (clang-500.2.79) (based on LLVM 3.3svn)
</span><span class='line'>Target: x86_64-apple-darwin13.0.0
</span><span class='line'>Thread model: posix
</span><span class='line'>
</span><span class='line'>rvm install 1.9.3 --with-gcc=clang</span></code></pre></td></tr></table></div></figure>


<h2>Reference</h2>

<p>http://stackoverflow.com/questions/8139138/how-can-i-install-ruby-1-9-3-in-mac-os-x-lion</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-10-29T11:00:00+09:00" pubdate data-updated="true">2013-10-29</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/use-http-caching-in-heroku-with-cloudflare/">Use HTTP Caching in Heroku with Cloudflare</a></h1>
	<div class="entry-content">
		<h1>TL;DR</h1>

<ul>
<li>Heroku doesn’t provide HTTP caching by default</li>
<li>Use CDN like <a href="http://www.cloudflare.com/">Cloudflare</a> or <a href="http://aws.amazon.com/cloudfront/">Amazon CloudFront</a>

<ul>
<li>Clouldflare has free plan, takes you less than 3 minutes to setup.</li>
</ul>
</li>
</ul>


<h1>HTTP Caching</h1>

<p>Just a quick example of HTTP caching.</p>

<p><img src="http://cdn.kinopyo.com/images/http_caching_example.jpg" alt="HTTP caching example" /></p>

<p>You can really feel the difference after you enabled it. Since most of your static assets, like js, css and image files, are gonna use browser cache without hitting your rails application, the user experience is improved a lot.</p>

<p>In my hobboy project <a href="http://quoty.me">quoty.me</a>, user had to download the black colored background image(22k) every time they visit a page, so there was a time lag to notice the background changed from white to black, which bothered me a lot. And that was why I noticed the HTTP caching is not enabled in Heroku.</p>

<h1>Heroku&#8217;s HTTP Caching</h1>

<blockquote><p>Heroku doesn’t provide HTTP caching by default. In order to take advantage of HTTP caching, you’ll need to configure your application to set the appropriate HTTP cache control headers and use a content delivery network (CDN) or other external caching service.</p></blockquote>

<p>I&#8217;m using cedar stack in Heroku, but I have to use &#8220;external&#8221;(oppose to add-ons or solutions provided by Heroku) stuff to make HTTP caching work.</p>

<p>I&#8217;ve also tried <a href="http://rtomayko.github.io/rack-cache/">Rack::Cache</a> with Memcache but somehow it didn&#8217;t work for me.</p>

<h1>Setup Cloudflare</h1>

<p>This time I decided to give Cloudflare a try. It&#8217;s free, easy to setup, and just work.</p>

<p>I&#8217;ll cut off how to setup Cloudflare, as the tutorial in its website is realy excellent. Just go to <a href="https://www.cloudflare.com/">https://www.cloudflare.com/</a> and follow the instructions, within 3-4 steps you&#8217;re done.</p>

<p>The other thing you have to do is to update your nameserver to the one provided by Cloundflare, like &#8220;IAN.NS.CLOUDFLARE.COM&#8221;. I&#8217;m using <a href="http://www.godaddy.com/">GoDaddy</a> for my quoty.me domain, the link to setup nameserver looks like this.</p>

<p><img src="http://cdn.kinopyo.com/images/godaddy_nameserver.jpg" alt="GoDaddy Nameserver setup link" /></p>

<h1>Further Reading</h1>

<ul>
<li><a href="https://devcenter.heroku.com/articles/http-caching">HTTP Caching | Heroku Dev Center</a>
<a href="https://devcenter.heroku.com/articles/increasing-application-%20-performance-with-http-cache-headers">Increasing Application Performance with HTTP Cache Headers | Heroku Dev Center</a></li>
<li><a href="https://devcenter.heroku.com/articles/http-caching-ruby-rails">HTTP Caching in Ruby with Rails | Heroku Dev Center</a></li>
<li><a href="http://railscasts.com/episodes/321-http-caching">#321 HTTP Caching (pro) - RailsCasts</a></li>
<li><a href="http://www.bestechvideos.com/2009/03/21/railslab-scaling-rails-episode-11--%20advanced-http-caching">RailsLab Scaling Rails: Episode #11 - Advanced HTTP Caching</a></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-07-14T08:51:00+09:00" pubdate data-updated="true">2013-07-14</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/cache/'>Cache</a>, <a class='category' href='/blog/categories/heroku-/'>Heroku,</a>


</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/me-as-a-nightowl-become-a-morning-person-for-31-days/">夜型の僕が早起きを31日間頑張って思ったこと</a></h1>
	<div class="entry-content">
		<p><img src="http://cdn.kinopyo.com/images/morning_person.JPG" alt="僕とチームメートのテーブルの間にポスト・イットを貼って早起きした日数を刻んでました。" /></p>

<h2>TL;DR</h2>

<ul>
<li>早起きしたいと自ら望むこと</li>
<li>やれば絶対誰でもできる（事実）</li>
<li>柔軟に軌道修正</li>
</ul>


<h2>はじめに</h2>

<p>5/22から早起きを頑張りました。
&#8220;何時に起きてるの？&#8221;
&#8220;8時です&#8221;
&#8220;えー全然早くね～じゃん&#8221;
と即行で鼻で笑われたりしました。</p>

<p>はい、ここ数年は大体夜2時前後に寝て朝9時半起きだった僕にとっては
もうこれが大きな一歩です。
何より、全然できないといつも思ってたからです。
また今はいろいろ試行錯誤で8時にしただけで、
しようと思えば6〜7時にもできる自信が付いたんです。</p>

<p>この一ヶ月で頑張ったこと、思ったことをの共有したいと思います。</p>

<h2>きっかけ</h2>

<p>段々年をとると、よほどインパクのでかい物事が起きないと
今までの生活習慣を変えるのは大変かなと思ってます。
その中でも早起きはずっとしたかったんです。
ちょうどチームの友達とこの話をしたら彼も同じことを考えるので
2人で頑張ろうという流れに何となくなりました。
できるかどうか、半信半疑の感じで始めたのですが、</p>

<ul>
<li>約束を破りたくない</li>
<li>そして何より負けたくない</li>
</ul>


<p>の2つの見えないチカラが背中をずっと押してくれました。
（前半は↑ですね、大体途中でもう早起きが習慣になってきました）</p>

<h2>早起きするために</h2>

<h3>まず&#8221;心の準備&#8221;</h3>

<h4>自発的に早起きしたい気持ち</h4>

<ul>
<li>周りの家族や友達、上司に言われてから</li>
<li>朝ミーティングがあるから</li>
</ul>


<p>のような感じですと絶対長続きできないです。
自発的に”そういう人になりたい”と思わないと。</p>

<h4>Be aware of yourself</h4>

<p>自分の一日の行動、気持ち、体調などに気を配ることです。
効率は上がったのか？いつが一番眠いのか？気持ちいいと感じるのか？
などなどどんどん自分に質問を投げて、軌道修正する。</p>

<h4>メリットを感じなければやめる</h4>

<p>実際早起きして得することはあったのか？
無駄に疲れて、ストレスが溜まるばかりにいいことは全然なかった。
特にメリットを感じなければやめて</p>

<h3>具体的な試み</h3>

<p>極めてシンプルです、簡単とは言えないですが。</p>

<ol>
<li>監督しあう仲間を探す</li>
<li>朝食の時間を楽しむ</li>
<li>睡眠時間は削らない</li>
<li>運動して無理やり早寝する</li>
</ol>


<h4>監督(supervise)しあう仲間を探す</h4>

<p>自分と同じくらいのレベルで同じ挑戦をしたい人を見つかればベストですが、
そうじゃなくても自分が一番信頼できる人に自分のプランをコミットするのも全然ありです。
こういう手法は今まで何度も聞きましたが、やってみて思ったのが
本当に一番効率のいい方法で、僕の性格にもぴったりの感じです。</p>

<h4>朝食を楽しむ</h4>

<p>早起きしたら朝食は絶対抜けないと自分で決めました。
たまには外で食べながら本を読んだり、単純にぼっとしたりして
自分なりで朝を楽しんでました。
余裕のある朝なんて贅沢すぎる！</p>

<p>また初めて最初の土日が一番ピーク（起きたくない）かもしれませんが、
あえて朝に予定を入れたり、起きたらとりあえず
一杯のコーヒーを飲んだりするなど自分なりで
乗り越える方法を事前に考えて起きたらいいです。</p>

<h4>睡眠時間は削らない</h4>

<p>早起きした分仕事も早めにスタートできるので、
夜は今までと比べて早めに退勤することができて、
帰って料理したり本読んだりすれば自然に11時くらいから
もう寝るモードに入ります。
逆に睡眠時間を削ると本末転倒なことになるので、
疲れたり眠くなったりするしかないですね。</p>

<h4>運動して無理やり早寝する</h4>

<p>最初の二三日は僕はいつもランニングして”無理やり”
早寝を促進してます。
体がちょうど良い感じに疲れてその流れで寝れば
自然に早起きのサイクルになります。</p>

<h4>その他のInspiration</h4>

<p><a href="http://michaelhyatt.com/053-how-to-become-a-morning-person-podcast.html">#053: How to Become a Morning Person [Podcast] | Michael Hyatt</a></p>

<blockquote><p>You said, “I’m a night person or a night owl by nature.” It’s my own personal belief that people aren’t morning people or evening people by nature.
I don’t think there is anything biologically or physiologically that you can point to that would suggest that is somehow predetermined. We may have a preference and we may have a set of practices that have been conditioned into a habit over a long period of time, but these are things I believe that with focus and intention can be changed.</p></blockquote>

<h2>最後に</h2>

<p>紹介した方法以外の目覚めし時計をどう設定するとか、
部屋の照明を暗くするとかは全部マイナーの問題にすぎないです。</p>

<p>新しいことを21日間続ければ習慣になるそうですが、
僕の場合大体10日でもう慣れた実感がしました。
ライフサイクルが改善されて、電車の中でも本が読める気力があって
オフで勉強したことが仕事にもいいフィードバックと刺激になったと思います。
この際隣の人と試してみてはどうですか？</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-21T21:45:00+09:00" pubdate data-updated="true">2013-06-21</time></div>
	<div class="tags">

</div>
	
</div></article>


    <article class="post">
	<h1 class="title"><a href="/blog/notes-on-lets-make-testing-fun-again/">Notes on Let&#8217;s Make Testing Fun Again</a></h1>
	<div class="entry-content">
		<h2>The talk</h2>

<p><a href="http://lanyrd.com/2012/windycityrails/sxqbt/">Let&#8217;s Make Testing Fun Again at WindyCityRails 2012 | Lanyrd</a></p>

<script async class="speakerdeck-embed" data-id="5048ea4bb8fe2d0002020475" data-ratio="1.2994923857868" src="//speakerdeck.com/assets/embed.js"></script>




<div class='video-container'>
<iframe src="http://player.vimeo.com/video/49525644" width="400" height="300" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</div>


<h2>Communication</h2>

<blockquote><p>Tests give you about the code. This happens over time, where you find that tests have become hard to write, the tests are becoming complicated and bogged down.</p>

<p>Rather than use it as an opportunity to blame the test or to blame testing, <strong>you should use it as an opportunity to learn something about your code, that there is a dependency that could potentially be simplified, or something you could be doing better.</strong></p></blockquote>

<h2>Keep relevant setup close</h2>

<blockquote><p>This is something that &#8220;relative good&#8221;(in terms of &#8220;absolute good&#8221;). It&#8217;s generally good to keep the setup of your tests close to the tests where it is.</p>

<p>What you want to avoid is the case where some sort of <code>before</code> setup way at the top of the file and you have stuff, and more stuff, and more stuff, and eventually in the end, what&#8217;s the <code>@user.name</code>? I don&#8217;t remember.</p></blockquote>

<h3>An Example</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">describe</span> <span class="no">User</span> <span class="k">do</span>
</span><span class='line'>  <span class="n">before</span> <span class="k">do</span>
</span><span class='line'>    <span class="vi">@user</span> <span class="o">=</span> <span class="no">Factory</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="ss">:user</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># and more stuff</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1"># and more stuff</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">it</span> <span class="s2">&quot;uses the user&quot;</span> <span class="k">do</span>
</span><span class='line'>    <span class="vi">@user</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">should</span> <span class="o">==</span> <span class="c1"># i don&#39;t remember</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is where you see sometimes people say &#8220;You should never have setup outside your original test&#8221;.</p>

<h3>What to do about duplications and complicate shared setups</h3>

<blockquote><p>I think a lot of times if you need a complicated setup to test code, that often means your code is too complicated you need to start working out to move your dependencies. <strong>I tend to have a higher tolerance for duplication in my tests</strong> than I do in my regular code, specifically because <strong>I&#8217;m more interested in having the communication close</strong>, and less interested in maybe being clever about extracting setups in my tests. Sometimes I do if there&#8217;s a piece of stuff that&#8217;s really tightly coupled, and I can give it a descriptive enough name that I still feel like I have the benefit of keeping the setup close in the actual test.</p></blockquote>

<h2>Test Simple Values</h2>

<p>By using literal in check, when the spec fails, the error message is much easier to understand.</p>

<h2>Spy, don&#8217;t mock</h2>

<p>A <a href="http://pivotal.github.io/jasmine/">jasmine</a>
 test example.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">cheeseburger</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">cheeses</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Ajax call to cheese server</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s1">&#39;spies on the cheese server&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">spyOn</span><span class="p">(</span><span class="nx">cheeseburger</span><span class="p">,</span> <span class="s1">&#39;cheeses&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">cheeseburger</span><span class="p">.</span><span class="nx">cheeses</span><span class="p">();</span>
</span><span class='line'>  <span class="nx">expect</span><span class="p">(</span><span class="nx">cheeseburger</span><span class="p">.</span><span class="nx">cheeses</span><span class="p">).</span><span class="nx">toHaveBeenCalled</span><span class="p">();</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Readability advantage</li>
<li>Easy to find where actually fails</li>
</ul>


<p>BTW, if in spec, we need write like this:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">it</span> <span class="s1">&#39;spies on the cheese server&#39;</span> <span class="k">do</span>
</span><span class='line'>  <span class="c1"># in the reversed order</span>
</span><span class='line'>  <span class="n">cheeseburger</span><span class="o">.</span><span class="n">should_receive</span><span class="p">(</span><span class="ss">:cheeses</span><span class="p">)</span>
</span><span class='line'>  <span class="n">cheeseburger</span><span class="o">.</span><span class="n">cheeses</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<h3>More about Spy on Ruby and Rails</h3>

<p><a href="https://github.com/thoughtbot/bourne">thoughtbot/bourne</a> gem can let you have the rspec-like test spies syntax.</p>

<p><a href="http://robots.thoughtbot.com/post/159805295/spy-vs-spy">Spy vs spy</a>, good explanation on what is test spy the benefit of it.</p>

<h2>What Do We Love?</h2>

<p>These are quite frank and interesting questions.</p>

<ol>
<li>Do we still love writing tests?</li>
<li>Or do we just love having written tests?</li>
<li>Or do we just love saying that we&#8217;ve written tests?</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-06-01T15:18:00+09:00" pubdate data-updated="true">2013-06-01</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/testing/'>Testing</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    Qihuan Piao

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'kinopyoblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-33226278-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>